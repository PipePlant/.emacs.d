use warnings;
use strict;
use Encode;
use Data::Dumper;
use JSON;
use feature qw(say);

my $in_file = "./OLD/tmpdocument/hdlg_dzyyqlx.show.txt";
my $out_file = "./tmp_data/hdlg_dzyyqlx_import.txt";

my $buff;
{
    local $/ = undef;
    open my $IN ,"<", $in_file or die $!;
    $buff = <$IN>;
    close $IN;
}

open my $OUT ,">", $out_file or die $!;

$buff =~ s/(TIPS\t出境流程)/##########\n$1/;
$buff =~ s/(2_tips_4.jpeg)/##########\n$1/;
$buff =~ s/TIPS\t(出境流程)\nTIPS\t(DEPARTURE PROCEDURES)/NOTE:$1\t$2/;
$buff =~ s/TIPS\t(机票)\nTIPS\t(Airline Ticket)/NOTE:$1\t$2/;
$buff =~ s/TIPS\t(登机牌)/NOTE:$1/;
$buff =~ s/TIPS\t(航班出发时间表)/NOTE:$1/;
$buff =~ s/TIPS\t(American VISA)\nTIPS\t(美国签证)/NOTE:$2\t$1/;
$buff =~ s/TIPS\t(Schengen VISA)\nTIPS\t(申根签证)/NOTE:$2\t$1/;
$buff =~ s/(2_tips_4.jpeg)\n(TIPS\tI-94 Form)/$2\n$1/;
$buff =~ s/TIPS\t(I-94 Form)/NOTE:$1/;
$buff =~ s/TIPS\t(Customs Declaration Form)/NOTE:$1\n2_tips_5.png/;
$buff =~ s/(在此处签名)\n2_tips_5.png/$1/g;
$buff =~ s/\[TIP\](suit)(套装，西装)/$1\t$2/g;
$buff =~ s/\[TIP\](overcoat)(大衣)/$1\t$2/g;
$buff =~ s/(rotary-dial telephone)(拨键式电话)/$1\t$2/g;
$buff =~ s/(black)(黑色的)/$1\t$2/;
$buff =~ s/(white)(白色的)/$1\t$2/;
$buff =~ s/(red)(红色的)/$1\t$2/;
$buff =~ s/(pink粉)(红色的)/$1\t$2/;
$buff =~ s/(blue)(蓝色的)/$1\t$2/;
$buff =~ s/(green)(绿色的)/$1\t$2/;
$buff =~ s/(brown咖)(啡色的)/$1\t$2/;
$buff =~ s/(gray)(灰色的)/$1\t$2/;
$buff =~ s/(orange)(橘色的)/$1\t$2/;
$buff =~ s/(purple)(紫色的)/$1\t$2/;
$buff =~ s/(purple\t紫色的)/$1\n14_zhanque.jpeg/;
$buff =~ s/(star key\/button\t星号键)\n(display screen\t画面显示)/$2\n$1/;
$buff =~ s/(star key\/button\t星号键\npound key\/button\t井字键)\n(22_13.png)/$2\n$1/;
$buff =~ s/(pound key\/button\t井字键)/$1\n22_zhanque.jpeg/;
$buff =~ s/(========================================\n)(====================\n)/$1==============================\n\n==============================\n$2/g;
$buff =~ s/(1_tips_9\.jpeg\n1_tips_10\.jpeg)\n(NOTE:登机牌)/$2\n$1/;
$buff =~ s/(1_tips_11\.jpeg)\n(NOTE:航班出发时间表)/$2\n$1/;
$buff =~ s/(1_tips_12\.png)\n(NOTE:美国签证\tAmerican VISA)/$2\n$1/;
$buff =~ s/(NOTE:申根签证\tSchengen VISA)/$1\n1_tips_13.png/;
$buff =~ s/(备注\n)1_tips_13.png\n/$1/;
$buff =~ s/拍照 & 买相机/拍照＆买相机/;
$buff =~ s/吗？ \（临时/吗？\（临时/;
$buff =~ s/(这班车上有餐车吗？\n)/$1The dining car is in the seventh carriage.\n餐车在第七车厢。\n/g;
$buff =~ s/TIPS\tCustoms Declaration[\s\S]+TIPS\tBorder Protection\n//g;
$buff =~ s/(决定要买\n)/====================\n$1====================\n/;
$buff =~ s/(询问付款)\n(地点\n)/====================\n$1$2====================\n/g;
$buff =~ s/(Where is the cashier)/Where do I pay\?\n在哪里付账？\n$1/;

say $OUT $buff;
close $OUT;
