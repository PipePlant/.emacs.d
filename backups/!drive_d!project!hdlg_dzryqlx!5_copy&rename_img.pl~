use warnings;
use strict;
use Encode;
use Data::Dumper;
use File::Basename;
use File::Copy;
use feature qw(say);

my %imgHash;
map {
    my $img = $_;
    my $imgUtf8 = Encode::encode("utf8",Encode::decode("gbk",$img));
    $imgHash{basename $imgUtf8} = $img;
} glob "./image/*/*";

my $newPath = "./hdlg_dzryqlx_resources/";
my $img_log = "./tmp_data/img_log.txt";

open my $IMG_LOG ,"<", $img_log or die $!;
while (<$IMG_LOG>) {
    $_ =~ /(.*)\t(.*)/;
    my $oldName = $1;
    my $newName = $2;
    if (exists $imgHash{$oldName}) {
        copy ($imgHash{$oldName},$newPath.$newName);
    }
}
close $IMG_LOG;
