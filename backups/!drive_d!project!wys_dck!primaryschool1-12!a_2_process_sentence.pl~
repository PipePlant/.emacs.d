use strict;
use warnings;
use Data::Dumper;
use Encode;
use JSON;
use feature qw(say);

my @word_list_files = glob "./v2_data/word_list/*";

foreach my $word_list_file (@word_list_files) {
    $word_list_file =~ /(1l\d+)/;
    my $sentence_file = "./v2_data/sentence/".$1."_sentence.txt";
    my $output_file = "./v2_data/tmp_data/".$1."_additional_data.txt";
    if (-e $sentence_file) {
        open my $WORD ,"<", $word_list_file or die $!;
        my @wordData = ();
        while (<$WORD>) {
            chomp;
            push @wordData,$_;
        }
        close $WORD;

        open my $SENTENCE ,"<", $sentence_file or die $!;
        open my $OUT ,">", $output_file or die $!;
        foreach my $word (@wordData) {
            while (<$SENTENCE>) {
                chomp;
                my $line = $_;
                next if $line eq "";
                $line =~ s/　//g;
                $line =~ s/’/'/g;

                if ($line =~ /\Q$word\E/) {
                    say $OUT $word."\n".$line;
                    say $OUT "------------------";
                    last;
                }
            }
        }
        close $SENTENCE;
        close $OUT;
    }
}
