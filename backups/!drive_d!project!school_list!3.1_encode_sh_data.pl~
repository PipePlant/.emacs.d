use warnings;
use strict;
use Data::Dumper;
use feature qw(say);
use LWP;
use HTTP::Request;
use JSON;
use Encode;

my $in = "./sh_shcool_data.txt";
my $out = "./sh_shcool_data_encode.txt";

open IN ,"< $in", or die $!;
open OUT ,"> $out" or die $!;

while (<IN>) {
	
	chomp;
	my $line = $_;
	while ($line =~ /(&#(\d+);)/g) {

		my $word = $1;
		my $num = $2;
		my $chn = encode("utf-8",chr(hex("0x".sprintf("%X",$2))));
		$line =~ s/$word/$chn/g;
	}
	say OUT $line;
}

close IN;
close OUT;